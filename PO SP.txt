 CREATE PROCEDURE "crystal_sp_get_purchase_order" (IN DocKey decimal(19, 0)) 
AS 
BEGIN 
SELECT OADM."CompnyName" AS "Company Name", OADM."CompnyAddr" AS "Company Address", OADM."Phone1" AS "Company Phone1", OADM."FreeZoneNo" AS "Company Reg No", OADM."TaxIdNum" AS "Company Vat No", ADM1."TaxIdNum6" AS "Company TPIN No", OADM."Phone1" AS "Company Phone", OADM."Fax" AS "Company Fax"
, 'COPY LOCAL PURCHASE ORDER' AS "Report Name"
, CAST(T0."DocNum" AS varchar(50)) AS "PO No", T0."TaxDate" AS "PO Date", T0."NumAtCard" AS "Ref No", T6."PymntGroup", T0."DocDueDate" AS "Desired Ship Date", T0."CardName" AS "Vendor Name", T0."Address2" AS "Vendor Address", T3."Name" AS "Contact Person Name", T3."E_MailL" AS "Contact Person Email", T3."Tel1" AS "Contact Person Tel1", T3."Fax" AS "Contact Person Fax", T0."DocCur", T2."CurrName" AS "Currencyname", T2."F100Name" AS "Hundredthname", T1."ItemCode", T1."Dscription", T1."Quantity", T1."unitMsr", T1."Price", T1."DiscPrcnt", T1."VatPrcnt", T1."LineTotal", T0."VatSum", T0."DocTotal", T0."Comments" AS "Special Instructions" 
FROM OADM, ADM1, OPOR T0 
INNER JOIN POR1 T1 ON T0."DocEntry" = T1."DocEntry" 
INNER JOIN OCRN T2 ON T0."DocCur" = T2."CurrCode" 
LEFT OUTER JOIN OCPR T3 ON T0."CardCode" = T3."CardCode" AND T0."CntctCode" = T3."CntctCode" 
INNER JOIN NNM1 T5 ON T0."Series" = T5."Series" 
LEFT OUTER JOIN OCTG T6 ON T0."GroupNum" = T6."GroupNum" 
WHERE T0."DocEntry" = :DocKey;
END;
 
